<!DOCTYPE html>
<html lang="en">

<head>
    
    <title>Home</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
     <!--link to cssSheet-->
     <link rel="stylesheet" href="/static/Style_Dropdown.css">   
</head>

<body>
    <ul class="navbar">
        <li><a href="{{ url_for('home') }}">Home</a></li>
        <li><a class="active" href="{{ url_for('booking') }}">Book Room</a></li>
        <li><a href="{{ url_for('contact') }}">Contact</a></li>
        <li><a href="{{ url_for('information') }}">Information</a></li>
    </ul>
    <h1>Room Booking</h1>
    <button class="BookButton" type="button" disabled onclick="displayAlert()">BOOK</button>
    <!-- Disable the button by default -->

    <!--Create links to change the page in the tab bar-->
    <div class="tab">
        <button class="tablinks" onclick="OpenDay(event, 'Monday')">Mon</button>
        <button class="tablinks" onclick="OpenDay(event, 'Tuesday')">Tue</button>
        <button class="tablinks" onclick="OpenDay(event, 'Wednesday')">Wed</button>
        <button class="tablinks" onclick="OpenDay(event, 'Thursday')">Thu</button>
        <button class="tablinks" onclick="OpenDay(event, 'Friday')">Fri</button>
    </div>

    <!--The content of the tabs-->
    <div id="Monday" class="tabcontent">
        <table class="tableAvailability">
            <th>Time</th>
            <th>Availability</th>
            <tr>
                <td>07:00 - 08:00</td>
                <td><input type="checkbox" id="randomCheckbox" onclick="displayCheckbox()">
                    <!-- Checkbox to enable the button --></td>
            </tr>
            <tr>
                <td>08:00 - 09:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>09:00 - 10:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>10:00 - 11:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>11:00 - 12:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>12:00 - 13:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>13:00 - 14:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>14:00 - 15:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>15:00 - 16:00</td>
                <td>Reserved</td>
            </tr>
        </table>
    </div>

    <div id="Tuesday" class="tabcontent">
        <table class="tableAvailability">
            <th>Time</th>
            <th>Availability</th>
            <tr>
                <td>07:00 - 08:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>08:00 - 09:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>09:00 - 10:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>10:00 - 11:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>11:00 - 12:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>12:00 - 13:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>13:00 - 14:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>14:00 - 15:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>15:00 - 16:00</td>
                <td>Reserved</td>
            </tr>
        </table>
    </div>

    <div id="Wednesday" class="tabcontent">
        <table class="tableAvailability">
            <th>Time</th>
            <th>Availability</th>
            <tr>
                <td>07:00 - 08:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>08:00 - 09:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>09:00 - 10:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>10:00 - 11:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>11:00 - 12:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>12:00 - 13:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>13:00 - 14:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>14:00 - 15:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>15:00 - 16:00</td>
                <td>Reserved</td>
            </tr>
        </table>
    </div>

    <div id="Thursday" class="tabcontent">
        <table class="tableAvailability">
            <th>Time</th>
            <th>Availability</th>
            <tr>
                <td>07:00 - 08:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>08:00 - 09:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>09:00 - 10:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>10:00 - 11:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>11:00 - 12:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>12:00 - 13:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>13:00 - 14:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>14:00 - 15:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>15:00 - 16:00</td>
                <td>Reserved</td>
            </tr>
        </table>
    </div>

    <div id="Friday" class="tabcontent">
        <table class="tableAvailability">
            <th>Time</th>
            <th>Availability</th>
            <tr>
                <td>07:00 - 08:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>08:00 - 09:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>09:00 - 10:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>10:00 - 11:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>11:00 - 12:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>12:00 - 13:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>13:00 - 14:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>14:00 - 15:00</td>
                <td>Reserved</td>
            </tr>
            <tr>
                <td>15:00 - 16:00</td>
                <td>Reserved</td>
            </tr>
        </table>
    </div>
    <input type="checkbox" id="randomCheckbox" onclick="displayCheckbox()"> <!-- Checkbox to enable the button -->

    <!--Standard clickable dropdown-->
    <div class="dropdown">
        <button onclick="toggleDropdown()" class="dropbtn" id="dropdownButton">Select Group Room</button>
   
        <!--option of dropdown-->
        <div id="dropdownID" class="dropdown-content">
            <a href="#" onclick="SelectRoom('Room 4.118')">Room 4.118</a>
            <a href="#" onclick="SelectRoom('Room 4.120')">Room 4.120</a>
            <a href="#" onclick="SelectRoom('Room 4.122')">Room 4.122</a>
            <a href="#" onclick="SelectRoom('Room 4.124')">Room 4.124</a>
            <a href="#" onclick="SelectRoom('Room 4.125')">Room 4.125</a>
            <!--Add options of choice in the list-->
        </div>
   </div>
   
<script>
function displayCheckbox() {
    var checkbox = document.getElementById("randomCheckbox"); // Get the checkbox
    var button = document.querySelector(".BookButton"); // Get the button

    if (checkbox.checked == true) { // If the checkbox is checked, enable the button
        button.disabled = false;
    } else {
        button.disabled = true; // Else disable the button
    }
}

function displayAlert() { // Display an alert when the button is clicked
    alert("Room Booked!");
}

// javascript for tabbar
function OpenDay(evt, day) {
    var i, tabcontent, tablinks;

    var dayOfWeek = (parseInt(day) - 1) % 7; //Convert the day of the week to a number between 0 and 6

    //Initialize variable with the function to check if the day of the week is before
    var buttonDisabled = hasDayPassed(dayOfWeek);

    //If the button should be disabled, do nothing so that it is not possible to open the content
    if (buttonDisabled) {
        return;
    }

    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    } //Hide all the content

    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    } //Remove the active class from all the buttons

    document.getElementById(day).style.display = "block";
        evt.currentTarget.className += " active"; //Show the content of the button that was clicked
}

function hasDayPassed (daysOfWeek) { //Function to check if the day of the week is before the current day
    var now = new Date();
    var currentDay = now.getDay();
    return currentDay > daysOfWeek; 
}

// javascript for closing the dropdown menu when a room is selected
function SelectRoom(room) {
    console.log("SelectRoom function called with room: ", room); // Debugging line
    var dropdownButton = document.getElementById("dropdownButton");
    if (dropdownButton) { // Check if the element exists
        dropdownButton.innerText = room;
    } else {
        console.log("Element with id 'SelectRoom' not found"); // Debugging line
    }
    if (typeof toggleDropdown === "function") { // Check if toggleDropdown is defined
        toggleDropdown(); //Closes the dropdown menu after selecting a room
    } else {
        console.log("toggleDropdown is not defined"); // Debugging line
    }
}

// javascript for when the user clicks on the dropdown button, toggle between hiding and showing the dropdown content
function toggleDropdown() {
    document.getElementById("dropdownID").classList.toggle("show");
}

// javascript for closing the dropdown menu when clicking outside of it
window.onclick = function(event) {
    if (!event.target.matches('.dropbtn')) {
        var dropdowns = document.getElementsByClassName("dropdown-content");
        var i;
        for (i = 0; i < dropdowns.length; i++){
        var openDropdown = dropdowns[i];
        if (openDropdown.classList.contains('show')) {
            openDropdown.classList.remove('show');
        }
        } 
    }
}

// Update current day in javascript
function updateClock(){
    var now = new Date();
    var daysOfWeek = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
    var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];

    var currentDay = now.getDay() + 1; //ChatGPT
    var buttons = document.getElementsByClassName("tablinks");

    //ChatGPT
    for (var i = 0; i < buttons.length; i++) { //Loop through all the buttons
        var buttonDay = i + 2; //Get the day of the week for the button
        buttons[i].disabled = buttonDay < currentDay; //Disable the button if the day of the week is before the current day
    }

    var dayname = daysOfWeek[now.getDay()];
    var month = months[now.getMonth()];
    var daynum = now.getDate();
    var year = now.getFullYear();

    document.getElementById('dayname').textContent = dayname;
    document.getElementById('month').textContent = month;
    document.getElementById('daynum').textContent = daynum;
    document.getElementById('year').textContent = year;
}

updateClock();
setInterval(updateClock, 1000);
</script>
</body>
</html>
